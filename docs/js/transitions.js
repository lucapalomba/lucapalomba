class PageTransition { constructor() { this.overlay = document.querySelector('.transition-overlay'); this.TRANSITION_MS = 600; this.init(); } init() { this.setupLinks(); } setupLinks() { document.querySelectorAll('a:not([target="_blank"]):not(.skip-link)').forEach(link => { link.addEventListener('click', (e) => { if (link.hostname === window.location.hostname) { e.preventDefault(); this.transitionToPage(link.href); } }); }); } transitionToPage(href) { if (!this.overlay) { window.location.href = href; return; } this.overlay.classList.remove('finished'); this.overlay.style.visibility = 'visible'; void this.overlay.offsetWidth; this.overlay.classList.add('active'); setTimeout(() => { window.location.href = href; }, this.TRANSITION_MS + 60); } } } new PageTransition();